<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finalizar Compra - Mi Boutique</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='pago.css') }}">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üí≥ Finalizar Compra</h1>
            <p>Est√°s a un paso de completar tu pedido</p>
        </div>
        
        <!-- Resumen del Pedido -->
        <div class="resumen-pedido">
            <h3> Tu Pedido</h3>
            {% for producto in productos %}
            <div class="producto-item">
                <span>{{ producto.nombre_producto }} x{{ producto.cantidad }}</span>
                <span>${{ "%.2f"|format(producto.precio * producto.cantidad) }}</span>
            </div>
            {% endfor %}
            
            <div class="total-final">
                Total a Pagar: ${{ "%.2f"|format(total) }}
            </div>
        </div>

        <!-- Formulario de Pago -->
        <form method="POST">
            <div class="metodos-pago">
                <h3> Elige tu m√©todo de pago:</h3>
                
                <label class="metodo-pago">
                    <input type="radio" name="metodo_pago" value="tarjeta" checked 
                           onchange="seleccionarMetodo(this)">
                    <strong>Tarjeta de Cr√©dito/D√©bito</strong><br>
                    <small>Pago seguro con tu tarjeta - Transacci√≥n encriptada</small>
                </label>

                <label class="metodo-pago">
                    <input type="radio" name="metodo_pago" value="paypal" 
                           onchange="seleccionarMetodo(this)">
                    <strong>PayPal</strong><br>
                    <small>Pago r√°pido y seguro - Sin compartir datos bancarios</small>
                </label>

                <label class="metodo-pago">
                    <input type="radio" name="metodo_pago" value="transferencia" 
                           onchange="seleccionarMetodo(this)">
                    <strong>Transferencia Bancaria</strong><br>
                    <small>Transferencia directa - Procesamiento en 24h</small>
                </label>

                <button type="submit" class="btn-pagar">
                     Confirmar Pago - ${{ "%.2f"|format(total) }}
                </button>

                <div class="info-seguridad">
                     Pago 100% seguro - Tus datos est√°n protegidos
                </div>
            </div>
        </form>
    </div>

    <script>
        function seleccionarMetodo(radio) {
            // Remover clase de todos los m√©todos
            document.querySelectorAll('.metodo-pago').forEach(metodo => {
                metodo.classList.remove('metodo-seleccionado');
            });
            
            // Agregar clase al m√©todo seleccionado
            radio.parentElement.classList.add('metodo-seleccionado');
        }

        // Seleccionar el primer m√©todo al cargar la p√°gina
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelector('.metodo-pago').classList.add('metodo-seleccionado');
        });
    </script>
</body>
</html>